<!DOCTYPE html>
<html>
<head>
    <title>Trigger OOM Crash</title>
</head>
<body>
    <h1>正在触发内存溢出以模拟进程崩溃...</h1>
    <script>
        try {
            const arr = [];
            // 每次申请 128MB 内存，加速崩溃过程
            const chunkSize = 128 * 1024 * 1024; 
            
            while (true) {
                // 使用 Uint8Array 确保真实分配物理内存
                // 如果只用 Array(1e9)，可能只是分配虚拟内存，不会立即触发物理内存不足
                arr.push(new Uint8Array(chunkSize));
                
                // 打印日志观察进度（可能在崩溃前来不及显示）
                console.log("Allocated memory blocks: " + arr.length);
            }
        } catch (e) {
            // 即使捕获了异常，浏览器此时可能已经处于极度不稳定的状态
            // 或者 V8 引擎抛出的 heap out of memory 也会导致进程终止
            console.error("Caught exception, but process might die soon:", e);
        }
    </script>
</body>
</html>
