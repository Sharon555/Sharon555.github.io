<!DOCTYPE html>
<html>
<head><title>Renderer OOM Crash</title></head>
<body>
    <h1>Allocating ~2GB to trigger Renderer OOM...</h1>
    <script>
        var arr = [];
        // 目标是分配大约 2GB - 4GB 的内存
        // 这通常是 64 位浏览器下单个 Renderer 进程的“软限制”或“硬限制”
        // 超过这个限制，操作系统会杀掉该进程，而不是整个系统
        var targetGB = 4; 
        var chunkSize = 128 * 1024 * 1024; // 128MB
        
        try {
            for (var i = 0; i < (targetGB * 8); i++) {
                // 使用 Uint8Array 强制物理内存分配
                arr.push(new Uint8Array(chunkSize));
                document.body.innerText = "Allocated: " + ((i + 1) * 128) + " MB";
            }
        } catch (e) {
            // 如果进入这里，说明 V8 捕获了异常（OOM），进程没有崩溃
            // 这通常发生在 PC 端内存非常大，且浏览器限制宽松时
            document.body.innerText = "Caught OOM Exception (Process did not crash)";
        }
    </script>
</body>
</html>
